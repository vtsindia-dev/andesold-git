<!--
  ~ Ecommerce
  ~
  ~ NOTICE OF LICENSE
  ~
  ~ This source file is subject to the Ecommerce.com license that is
  ~ available through the world-wide-web at this URL:
  ~ http://www.ecommerce.com/license-agreement.html
  ~
  ~ DISCLAIMER
  ~
  ~ Do not edit or add to this file if you wish to upgrade this extension to newer
  ~ version in the future.
  ~
  ~ @category    Ecommerce
  ~ @package     Ecommerce_Creditlimit
  ~ @copyright   Copyright (c) 2017 Ecommerce (http://www.ecommerce.com/)
  ~ @license     http://www.ecommerce.com/license-agreement.html
  ~
  -->
<!-- ko if: isEnable() -->
<div class="payment-option _collapsible opc-payment-additional discount-code"
     data-bind="mageInit: {'collapsible':{'openedState': '_active'}}">
    <div class="payment-option-title field choice" data-role="title">
        <span class="action action-toggle" id="block-discount-heading" role="heading" aria-level="2">
            <!-- ko i18n: 'Apply Credit Discount'--><!-- /ko -->
        </span>
    </div>

    <div class="payment-option-content" data-role="content">
        <!-- ko if: isLoggedin()  -->
        <!-- ko ifnot: isInGroup() -->
        <span data-bind="i18n: 'We are sorry that you can not use Store Credit'"></span>
        <!-- /ko -->
        <!-- ko if: isInGroup() -->
        <!-- ko if: isHasCreditItem() -->
        <strong><span data-bind="i18n: 'Store Credit cannot be used to purchase Store Credit products'"></span></strong>
        <!-- /ko -->
        <!-- ko ifnot: isCreditItemOnly() -->
        <form class="form form-discount form-discount-credit" id="discount-credit-form"
              data-bind="blockLoader: isLoading">
            <div class="payment-option-inner">
                <div class="field">
                    <label class="" for="discount-code">
                        <span data-bind="i18n: 'Your current credit Balance is '"></span>
                        <span id="credit_balance" data-bind="text: creditdata.getFormatedBalance"></span>
                        </br>
                        <span data-bind="i18n: 'Enter a credit amount if you want to pay by Customer Credit'"></span>
                    </label>

                    <div class="control">
                        <input class="input-text"
                               type="text"
                               id="discount-credit"
                               name="discount_credit"
                               data-validate="{'required-entry':true}"
                               data-bind="value: amount, attr:{placeholder: $t('Enter credit amount')} "/>
                    </div>
                </div>
            </div>
            <div class="actions-toolbar">
                <div class="primary">
                    <button class="action action action-apply" type="submit"
                            data-bind="'value': $t('Apply'), click: apply">
                        <span><!-- ko i18n: 'Apply'--><!-- /ko --></span>
                    </button>
                    <!-- ko if: isApplied() -->
                    <button class="action action action-apply" type="submit"
                            data-bind="'value': $t('Cancel'), click: cancel">
                        <span><!-- ko i18n: 'Cancel'--><!-- /ko --></span>
                    </button>
                    <!-- /ko -->
                </div>
            </div>
        </form>
        <!-- /ko -->
        <!-- /ko -->
        <!-- /ko -->
        <!-- ko ifnot: isLoggedin() -->
        <div class="discount">
            <div>
                <div class="checkout-cart-credit-amount">
                    <span data-bind="i18n: 'Please'"></span>
                    <a data-bind="attr: { href: loginLink()}, text: 'login'"></a>
                    <span data-bind="i18n: 'to use customer credit'"></span>
                </div>
            </div>
        </div>
        <!-- /ko-->
    </div>
</div>
<!-- /ko -->